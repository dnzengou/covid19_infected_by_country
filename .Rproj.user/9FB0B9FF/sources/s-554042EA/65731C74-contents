<?php
// Reads the variables sent via POST
$sessionId   = $_POST["sessionId"]; // Generates a unique value when the session starts and sent every time a mobile subscriber response has been received.
$serviceCode = $_POST["serviceCode"]; // Refers to your USSD code


//This is the first menu screen

if ( $text == "" ) { // Shows the user input. which is an empty string in the first notification of a session which after that concatenates all the user input within the session until the session ends.
  $response  = "CON Hi welcome, I can help you with COVID-19 related care options \n"; // Holds the answer to the user input
  // CON means an intermediate menu Or that the session is CONtinuing
  $response .= "1. Enter 1 to continue";
}


// Menu for a user who selects '1' from the first menu
// Will be brought to this second menu screen

else if ($text == "1") {
  $response  = "CON  Pick an option below \n";
  $response .= "1. Medical care \n";
  $response .= "2. Shopping care \n";
  $response .= "3. Food care \n";
  $response .= "4. Financial care \n";
}


//Menu for a user who selects '1' from the second menu above
// Will be brought to this third menu screen
else if ($text == "1*1") {
  $response = "CON You are about to order medical care \n";
  $response .= "Please Enter 1 to confirm \n";
}

else if ($text == "1*1*1") {
  $response = "CON Medical care non-related to COVID-19 cost -N- 10,000.00 \n";
  $response .= "Enter 1 to continue \n";
  $response .= "Enter 0 to cancel";
}

else if ($text == "1*1*1*1") {
  $response = "END Your medical care have been booked"; // END means the final menu and will trigger session termination i.e session is ENDing.
}


else if ($text == "1*1*1*0") {
  $response = "END Your medical care have been canceled";
}

// Menu for a user who selects "2" from the second menu above
// Will be brought to this fourth menu screen
else if ($text == "1*2") {
  $response = "CON You are about to order shopping care \n";
  $response .= "Please Enter 1 to confirm \n";
}

// Menu for a user who selects "1" from the fourth menu screen
else if ($text == "1*2*1") {
  $response = "CON Shopping care is free. Shopping items via this service can cost up to -N- 25,000.00 \n";
  $response .= "Enter 1 to continue \n";
  $response .= "Enter 0 to cancel";
}
        
else if ($text == "1*2*1*1") {
  $response = "END Your Shopping care has been ordered";
}
    
else if ($text == "1*2*1*0") {
  $response = "END Your Shopping care has been ordered";
}

// Menu for a user who enters "3" from the second menu above
// Will be brought to this fifth menu screen
else if ($text == "1*3") {
  $response = "CON You are about to order Food care \n";
  $response .= "Please Enter 1 to confirm \n";
}

// Menu for a user who enters "1" from the fifth menu
else if ($text == "1*3*1") {
  $response = "CON Food care can be ordered for up to -N- 50,000.00 \n";
  $response .= "Enter 1 to continue \n";
  $response .= "Enter 0 to cancel";
}

else if ($text == "1*3*1*1") {
  $response = "END Your Food care have been booked";
}
        
else if ($text == "1*3*1*0") {
  $response = "END Your Food care have been canceled";
}

// Menu for a user who enters "4" from the second menu above
// Will be brought to this sixth menu screen
else if ($text == "1*4") {
  $response = "CON You are about to order Financial care \n";
  $response .= "Please Enter 1 to confirm \n";
}

// Menu for a user who enters "1" from the sixth menu
else if ($text == "1*4*1") {
  $response = "CON Financial care can be provided for up to -N- 150,000.00 \n";
  $response .= "Enter 1 to continue \n";
  $response .= "Enter 0 to cancel";
}
                       
else if ($text == "1*4*1*1") {
  $response = "END Your Financial care have been booked";
}
            
else if ($text == "1*4*1*0") {
  $response = "END Your Financial care have been canceled";
}


//echo response
// Prints out the response for the user to read.

header('Content-type: text/plain');
echo $response


?>